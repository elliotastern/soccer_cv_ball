# Resume Training Configuration - Higher Resolution
# Increases resolution to improve small object detection
# WARNING: Significantly increases memory usage - only use if GPU memory allows

model:
  architecture: detr
  backbone: resnet50
  num_classes: 2
  pretrained: true
  hidden_dim: 256
  nheads: 8
  num_encoder_layers: 6
  num_decoder_layers: 6
  rfdetr_size: base
  remap_mscoco_category: false

training:
  batch_size: 2  # Keep at 2 (may need to reduce to 1 if OOM)
  learning_rate: 0.0002
  epochs: 50  # Extended to 50 epochs
  weight_decay: 0.0001
  gradient_clip: 0.1
  grad_accum_steps: 20
  resolution: 1288  # INCREASED from 1120 (original resolution)
  num_workers: 1
  device: cuda
  mixed_precision: true
  multi_scale: false  # Keep disabled to save memory
  expanded_scales: false
  
dataset:
  coco_train_path: /workspace/soccer_cv_ball/models/ball_detection_combined_optimized/dataset/train
  coco_val_path: /workspace/soccer_cv_ball/models/ball_detection_combined_optimized/dataset/valid
  category_name: "ball"
  category_id: 0
  ball_class_id: 1
  pin_memory: false
  prefetch_factor: 1
  persistent_workers: false

checkpoint:
  resume_from: /workspace/soccer_cv_ball/models/checkpoint.pth
  start_epoch: 40  # Update after epoch 40 completes
  save_dir: models/checkpoints

# Changes from base config:
# - resolution: 1120 -> 1288 (15% increase, back to original)
# - epochs: 40 -> 50 (extended training)
# - start_epoch: 38 -> 40 (resume from epoch 40)
#
# Benefits:
# - Higher resolution preserves small object details
# - May improve small objects mAP from 0.598 to >0.65
# - Better for detecting tiny balls in images
#
# Risks:
# - Significantly increases GPU memory usage (~15-20% more)
# - May cause OOM errors - reduce batch_size to 1 if needed
# - Slower training (more pixels to process)
